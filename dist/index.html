<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø¢Ø±Ø´ÛŒÙˆ Ø§Ø³Ù†Ø§Ø¯ Ø­Ù‚ÙˆÙ‚ÛŒ Ø§ÛŒØ±Ø§Ù† - Ú©Ø§Ù…Ù„Ø§Ù‹ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Vazirmatn', sans-serif; background: #0f172a; color: #e2e8f0; zoom: 0.9; }
        .layout { display: flex; min-height: 100vh; }
        
        /* Sidebar - Fully Visible */
        .sidebar { 
            width: 280px; 
            background: #1e293b; 
            padding: 1rem; 
            height: 100vh; 
            overflow-y: auto; 
            position: fixed;
            border-right: 2px solid #334155;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
        }
        
        .sidebar h2 { 
            text-align: center; 
            color: #10b981; 
            margin-bottom: 2rem; 
            padding: 1rem; 
            background: #0f172a; 
            border-radius: 8px;
        }
        
        .nav-item { 
            padding: 1rem; 
            margin: 0.5rem 0; 
            background: #334155; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .nav-item:hover { background: #475569; border-color: #10b981; }
        .nav-item.active { background: #10b981; color: white; }
        
        .nav-item i { width: 20px; margin-left: 0.5rem; }
        
        /* Main Content */
        .main-content { 
            flex: 1; 
            margin-right: 300px; 
            padding: 1rem;
        }
        
        .section { 
            background: #1e293b; 
            padding: 2rem; 
            border-radius: 12px; 
            margin-bottom: 2rem; 
            border: 1px solid #334155;
            display: none; 
        }
        .section.active { display: block; }
        .section h2 { color: #10b981; margin-bottom: 2rem; border-bottom: 2px solid #334155; padding-bottom: 1rem; }
        
        /* Buttons - High Contrast */
        .btn { 
            background: #3b82f6; 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: 600;
            margin: 8px; 
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .btn:hover { 
            background: #2563eb; 
            transform: translateY(-2px); 
            border-color: #60a5fa;
        }
        .btn-success { background: #10b981; }
        .btn-success:hover { background: #059669; border-color: #34d399; }
        .btn-danger { background: #ef4444; }
        .btn-danger:hover { background: #dc2626; border-color: #f87171; }
        .btn-warning { background: #f59e0b; color: #000; }
        .btn-warning:hover { background: #d97706; }
        
        /* Inputs */
        .input-field { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #475569; 
            border-radius: 8px; 
            background: #334155; 
            color: #e2e8f0; 
            margin: 8px 0;
            font-size: 16px;
        }
        .input-field:focus { border-color: #10b981; outline: none; background: #475569; }
        .input-field::placeholder { color: #94a3b8; }
        
        /* Results Areas */
        .results-area { 
            background: #334155; 
            padding: 1.5rem; 
            border-radius: 8px; 
            margin-top: 1rem; 
            min-height: 200px;
            border: 1px solid #475569;
        }
        
        .result-item { 
            background: #475569; 
            padding: 1rem; 
            margin: 0.5rem 0; 
            border-radius: 6px; 
            border-left: 4px solid #10b981;
        }
        
        /* Tabs */
        .tab-buttons { display: flex; margin-bottom: 1rem; flex-wrap: wrap; }
        .tab-btn { 
            background: #475569; 
            color: #e2e8f0; 
            padding: 12px 20px; 
            border: none; 
            margin-left: 4px; 
            margin-bottom: 4px;
            cursor: pointer; 
            border-radius: 8px;
            font-weight: 500;
            border: 2px solid transparent;
        }
        .tab-btn:hover { background: #64748b; border-color: #94a3b8; }
        .tab-btn.active { background: #10b981; color: white; border-color: #34d399; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Stats */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .stat-card { 
            background: #334155; 
            padding: 1.5rem; 
            border-radius: 8px; 
            text-align: center;
            border: 1px solid #475569;
        }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: #10b981; margin-bottom: 0.5rem; }
        
        /* Progress */
        .progress-bar { 
            width: 100%; 
            height: 12px; 
            background: #475569; 
            border-radius: 6px; 
            overflow: hidden; 
            margin: 12px 0;
            border: 1px solid #64748b;
        }
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #10b981, #3b82f6); 
            transition: width 0.5s ease; 
            width: 0%; 
        }
        
        /* Log Entries */
        .log-entry { 
            background: #475569; 
            padding: 12px; 
            margin: 8px 0; 
            border-radius: 6px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            border-left: 4px solid #64748b;
        }
        
        .log-entry.success { border-left-color: #10b981; }
        .log-entry.error { border-left-color: #ef4444; }
        .log-entry.warning { border-left-color: #f59e0b; }
        .log-entry.info { border-left-color: #3b82f6; }
        
        .delete-btn { 
            background: #ef4444; 
            color: white; 
            border: none; 
            padding: 6px 12px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 14px;
            font-weight: 600;
        }
        .delete-btn:hover { background: #dc2626; }
        
        /* Charts */
        .chart-container { 
            background: #334155; 
            padding: 1.5rem; 
            border-radius: 8px; 
            margin: 1rem 0;
            height: 300px;
        }
        
        /* Toast */
        .toast { 
            position: fixed; 
            top: 20px; 
            left: 20px; 
            right: 20px; 
            padding: 1rem; 
            border-radius: 8px; 
            color: white; 
            font-weight: 600; 
            z-index: 2000; 
            transform: translateY(-100px); 
            transition: transform 0.3s;
        }
        .toast.show { transform: translateY(0); }
        .toast.success { background: #10b981; }
        .toast.error { background: #ef4444; }
        .toast.warning { background: #f59e0b; color: #000; }
        .toast.info { background: #3b82f6; }
        
        /* Grid Layouts */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
        
        /* Utilities */
        .mt-2 { margin-top: 1rem; }
        .mb-2 { margin-bottom: 1rem; }
        .text-center { text-align: center; }
        .hidden { display: none !important; }
        
        @media (max-width: 1200px) {
            .sidebar { width: 250px; }
            .main-content { margin-right: 270px; }
            body { zoom: 0.85; }
        }
    </style>
</head>
<body>
    <div class="layout">
        <!-- Functional Sidebar -->
        <div class="sidebar">
            <h2>âš–ï¸ Ø¢Ø±Ø´ÛŒÙˆ Ø­Ù‚ÙˆÙ‚ÛŒ Ø§ÛŒØ±Ø§Ù†</h2>
            
            <nav>
                <div class="nav-item active" onclick="showSection('dashboard')">
                    <i class="fas fa-home"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ
                </div>
                <div class="nav-item" onclick="showSection('search')">
                    <i class="fas fa-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§Ø³Ù†Ø§Ø¯
                </div>
                <div class="nav-item" onclick="showSection('scraping')">
                    <i class="fas fa-globe"></i> Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§
                </div>
                <div class="nav-item" onclick="showSection('processing')">
                    <i class="fas fa-cogs"></i> Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ø³Ù†Ø§Ø¯
                </div>
                <div class="nav-item" onclick="showSection('reports')">
                    <i class="fas fa-chart-bar"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
                </div>
                <div class="nav-item" onclick="showSection('logs')">
                    <i class="fas fa-list"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ù„Ø§Ú¯â€ŒÙ‡Ø§
                </div>
                <div class="nav-item" onclick="showSection('settings')">
                    <i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…
                </div>
            </nav>
            
            <!-- Live Stats Sidebar -->
            <div style="margin-top: 2rem; padding: 1rem; background: #0f172a; border-radius: 8px; border: 1px solid #334155;">
                <h4 style="color: #10b981; margin-bottom: 1rem;">Ø¢Ù…Ø§Ø± Ø²Ù†Ø¯Ù‡</h4>
                <div style="font-size: 0.9rem;">
                    <div style="margin-bottom: 0.5rem;">Ø§Ø³Ù†Ø§Ø¯: <span id="sidebar-docs" style="color: #10b981; font-weight: bold;">0</span></div>
                    <div style="margin-bottom: 0.5rem;">Ø¹Ù…Ù„ÛŒØ§Øª: <span id="sidebar-operations" style="color: #3b82f6; font-weight: bold;">0</span></div>
                    <div style="margin-bottom: 0.5rem;">Ù…ÙˆÙÙ‚ÛŒØª: <span id="sidebar-success" style="color: #10b981; font-weight: bold;">0%</span></div>
                    <div>Ù„Ø§Ú¯â€ŒÙ‡Ø§: <span id="sidebar-logs" style="color: #f59e0b; font-weight: bold;">0</span></div>
                </div>
                <button class="btn btn-success" onclick="refreshAllStats()" style="width: 100%; margin-top: 1rem; padding: 8px; font-size: 14px;">
                    ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="section active">
                <h2><i class="fas fa-home"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-documents">0</div>
                        <div>Ø§Ø³Ù†Ø§Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø± Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</div>
                        <button class="btn btn-success" onclick="loadRealDocuments()">ğŸ“‚ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø² DB</button>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-operations">0</div>
                        <div>Ú©Ù„ Ø¹Ù…Ù„ÛŒØ§Øª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="operations-progress"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="successful-operations">0</div>
                        <div>Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆÙÙ‚</div>
                        <button class="btn" onclick="refreshAllStats()">ğŸ“Š Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ø¯Ø¯</button>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="active-proxies">0</div>
                        <div>Ù¾Ø±ÙˆÚ©Ø³ÛŒ ÙØ¹Ø§Ù„</div>
                        <button class="btn" onclick="testAllProxies()">ğŸŒ ØªØ³Øª Ù¾Ø±ÙˆÚ©Ø³ÛŒâ€ŒÙ‡Ø§</button>
                    </div>
                </div>
                
                <!-- Live Charts -->
                <div class="grid-2">
                    <div class="chart-container">
                        <h3 style="margin-bottom: 1rem;">Ù†Ù…ÙˆØ¯Ø§Ø± Ø¹Ù…Ù„ÛŒØ§Øª Ø²Ù†Ø¯Ù‡</h3>
                        <canvas id="operations-chart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3 style="margin-bottom: 1rem;">Ù†Ù…ÙˆØ¯Ø§Ø± Ù…ÙˆÙÙ‚ÛŒØª</h3>
                        <canvas id="success-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Search Section -->
            <div id="search-section" class="section">
                <h2><i class="fas fa-search"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø± Ø§Ø³Ù†Ø§Ø¯</h2>
                
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchSearchTab('text')">
                        <i class="fas fa-font"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ
                    </button>
                    <button class="tab-btn" onclick="switchSearchTab('semantic')">
                        <i class="fas fa-brain"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ
                    </button>
                    <button class="tab-btn" onclick="switchSearchTab('advanced')">
                        <i class="fas fa-search-plus"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
                    </button>
                    <button class="tab-btn" onclick="switchSearchTab('nafaqe')">
                        <i class="fas fa-balance-scale"></i> Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†ÙÙ‚Ù‡
                    </button>
                </div>

                <!-- Text Search Tab -->
                <div id="text-search-tab" class="tab-content active">
                    <h3>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ Ø¯Ø± Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</h3>
                    <div class="grid-2">
                        <input type="text" id="text-search-query" class="input-field" placeholder="Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡: Ù†ÙÙ‚Ù‡ØŒ Ø·Ù„Ø§Ù‚ØŒ Ø§Ø±Ø«...">
                        <select id="text-search-source" class="input-field">
                            <option value="">Ù‡Ù…Ù‡ Ù…Ù†Ø§Ø¨Ø¹</option>
                            <option value="Ù…Ø¬Ù„Ø³">Ù…Ø¬Ù„Ø³ Ø´ÙˆØ±Ø§ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ</option>
                            <option value="Ù‚Ø¶Ø§ÛŒÛŒÙ‡">Ù‚ÙˆÙ‡ Ù‚Ø¶Ø§ÛŒÛŒÙ‡</option>
                            <option value="ØªØ¯ÙˆÛŒÙ†">Ø¯ÙØªØ± ØªØ¯ÙˆÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ†</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="performRealTextSearch()">
                        ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ
                    </button>
                    <div id="text-search-results" class="results-area">
                        <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                            Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                        </div>
                    </div>
                </div>

                <!-- Semantic Search Tab -->
                <div id="semantic-search-tab" class="tab-content">
                    <h3>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
                    <textarea id="semantic-search-query" class="input-field" rows="4" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©Ø§Ù…Ù„ÛŒ Ø§Ø² Ø¢Ù†Ú†Ù‡ Ø¯Ù†Ø¨Ø§Ù„Ø´ Ù‡Ø³ØªÛŒØ¯. Ù…Ø«Ø§Ù„: Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ Ø²Ù†Ø§Ù† Ø¯Ø± Ø§Ø²Ø¯ÙˆØ§Ø¬ Ùˆ Ù…Ø³Ø§Ø¦Ù„ Ù…Ø§Ù„ÛŒ"></textarea>
                    <div class="grid-2">
                        <select id="semantic-precision" class="input-field">
                            <option value="high">Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ (Ù†ØªØ§ÛŒØ¬ Ú©Ù…ØªØ± Ø§Ù…Ø§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±)</option>
                            <option value="medium" selected>Ø¯Ù‚Øª Ù…ØªÙˆØ³Ø·</option>
                            <option value="low">Ø¯Ù‚Øª Ù¾Ø§ÛŒÛŒÙ† (Ù†ØªØ§ÛŒØ¬ Ø¨ÛŒØ´ØªØ±)</option>
                        </select>
                        <select id="semantic-limit" class="input-field">
                            <option value="10">10 Ù†ØªÛŒØ¬Ù‡</option>
                            <option value="20" selected>20 Ù†ØªÛŒØ¬Ù‡</option>
                            <option value="50">50 Ù†ØªÛŒØ¬Ù‡</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="performRealSemanticSearch()">
                        ğŸ§  Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ ÙˆØ§Ù‚Ø¹ÛŒ
                    </button>
                    <div id="semantic-search-results" class="results-area">
                        <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                            Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                        </div>
                    </div>
                </div>

                <!-- Advanced Search Tab -->
                <div id="advanced-search-tab" class="tab-content">
                    <h3>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù…ØªØ¹Ø¯Ø¯</h3>
                    <div class="grid-3">
                        <input type="text" id="advanced-title" class="input-field" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø³Ù†Ø¯">
                        <input type="text" id="advanced-article" class="input-field" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…Ø§Ø¯Ù‡">
                        <input type="date" id="advanced-date" class="input-field">
                    </div>
                    <div class="grid-2">
                        <select id="advanced-category" class="input-field">
                            <option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§</option>
                            <option value="Ù†ÙÙ‚Ù‡_Ùˆ_Ø­Ù‚ÙˆÙ‚_Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡">Ù†ÙÙ‚Ù‡ Ùˆ Ø­Ù‚ÙˆÙ‚ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡</option>
                            <option value="Ø·Ù„Ø§Ù‚_Ùˆ_ÙØ³Ø®_Ù†Ú©Ø§Ø­">Ø·Ù„Ø§Ù‚ Ùˆ ÙØ³Ø® Ù†Ú©Ø§Ø­</option>
                            <option value="Ø§Ø±Ø«_Ùˆ_ÙˆØµÛŒØª">Ø§Ø±Ø« Ùˆ ÙˆØµÛŒØª</option>
                            <option value="Ø±ÙˆÛŒÙ‡_Ù‚Ø¶Ø§ÛŒÛŒ">Ø±ÙˆÛŒÙ‡ Ù‚Ø¶Ø§ÛŒÛŒ</option>
                        </select>
                        <select id="advanced-doc-type" class="input-field">
                            <option value="">Ù‡Ù…Ù‡ Ø§Ù†ÙˆØ§Ø¹</option>
                            <option value="Ù‚Ø§Ù†ÙˆÙ†">Ù‚Ø§Ù†ÙˆÙ†</option>
                            <option value="Ø¯Ø§Ø¯Ù†Ø§Ù…Ù‡">Ø¯Ø§Ø¯Ù†Ø§Ù…Ù‡</option>
                            <option value="Ø¨Ø®Ø´Ù†Ø§Ù…Ù‡">Ø¨Ø®Ø´Ù†Ø§Ù…Ù‡</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-success" onclick="performRealAdvancedSearch()">
                            ğŸ”§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ÙˆØ§Ù‚Ø¹ÛŒ
                        </button>
                        <button class="btn btn-warning" onclick="clearAdvancedFilters()">
                            ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
                        </button>
                        <button class="btn" onclick="saveAdvancedSearch()">
                            ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø¬Ø³ØªØ¬Ùˆ
                        </button>
                    </div>
                    <div id="advanced-search-results" class="results-area">
                        <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                            Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                        </div>
                    </div>
                </div>

                <!-- Nafaqe Search Tab -->
                <div id="nafaqe-search-tab" class="tab-content">
                    <h3>Ø¬Ø³ØªØ¬ÙˆÛŒ ØªØ®ØµØµÛŒ Ù†ÙÙ‚Ù‡</h3>
                    
                    <div class="grid-3" style="margin-bottom: 1rem;">
                        <button class="btn" onclick="selectNafaqeType('Ø²ÙˆØ¬Ù‡')" id="nafaqe-spouse">
                            ğŸ’‘ Ù†ÙÙ‚Ù‡ Ø²ÙˆØ¬Ù‡
                        </button>
                        <button class="btn" onclick="selectNafaqeType('ÙØ±Ø²Ù†Ø¯Ø§Ù†')" id="nafaqe-children">
                            ğŸ‘¶ Ù†ÙÙ‚Ù‡ ÙØ±Ø²Ù†Ø¯Ø§Ù†
                        </button>
                        <button class="btn" onclick="selectNafaqeType('Ø§Ù‚Ø§Ø±Ø¨')" id="nafaqe-relatives">
                            ğŸ‘¥ Ù†ÙÙ‚Ù‡ Ø§Ù‚Ø§Ø±Ø¨
                        </button>
                    </div>
                    
                    <input type="text" id="nafaqe-details" class="input-field" placeholder="Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
                    <button class="btn btn-success" onclick="performRealNafaqeSearch()">
                        âš–ï¸ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†ÙÙ‚Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ
                    </button>
                    <div id="nafaqe-search-results" class="results-area">
                        <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                            Ø§Ø¨ØªØ¯Ø§ Ù†ÙˆØ¹ Ù†ÙÙ‚Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ØŒ Ø³Ù¾Ø³ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scraping Section -->
            <div id="scraping-section" class="section">
                <h2><i class="fas fa-globe"></i> Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø­Ù‚ÙˆÙ‚ÛŒ</h2>
                
                <div class="grid-2">
                    <div>
                        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯:</h3>
                        <textarea id="scraping-urls" class="input-field" rows="6" placeholder="Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø­Ù‚ÙˆÙ‚ÛŒ:&#10;https://rc.majlis.ir/fa/law/show/94202&#10;https://www.judiciary.ir/fa/verdict/123&#10;https://dotic.ir/portal/law/456"></textarea>
                        
                        <div class="grid-2">
                            <select id="scraping-delay" class="input-field">
                                <option value="2000">ØªØ§Ø®ÛŒØ± 2 Ø«Ø§Ù†ÛŒÙ‡</option>
                                <option value="5000" selected>ØªØ§Ø®ÛŒØ± 5 Ø«Ø§Ù†ÛŒÙ‡</option>
                                <option value="10000">ØªØ§Ø®ÛŒØ± 10 Ø«Ø§Ù†ÛŒÙ‡</option>
                            </select>
                            <select id="content-extraction" class="input-field">
                                <option value="full">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ø§Ù…Ù„ Ù…Ø­ØªÙˆØ§</option>
                                <option value="summary">Ø®Ù„Ø§ØµÙ‡ Ù…Ø­ØªÙˆØ§</option>
                                <option value="title-only">ÙÙ‚Ø· Ø¹Ù†ÙˆØ§Ù†</option>
                            </select>
                        </div>
                        
                        <div style="margin: 1rem 0;">
                            <label style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                                <input type="checkbox" id="use-proxy" checked style="margin-left: 0.5rem;">
                                Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" id="auto-categorize" checked style="margin-left: 0.5rem;">
                                Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø­ØªÙˆØ§
                            </label>
                        </div>
                        
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-success" onclick="startRealScraping()">
                                ğŸš€ Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ
                            </button>
                            <button class="btn btn-danger" onclick="stopScraping()" id="stop-scraping" style="display: none;">
                                â¹ï¸ ØªÙˆÙ‚Ù Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h3>Ù¾ÛŒØ´Ø±ÙØª Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯:</h3>
                        <div id="scraping-progress" class="results-area">
                            <div class="text-center" style="color: #94a3b8;">
                                Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯
                            </div>
                        </div>
                        
                        <h3>Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ø³Ú©Ø±Ù¾ Ø´Ø¯Ù‡:</h3>
                        <div id="scraping-preview" class="results-area">
                            <div class="text-center" style="color: #94a3b8;">
                                Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù…Ø­ØªÙˆØ§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Processing Section -->
            <div id="processing-section" class="section">
                <h2><i class="fas fa-cogs"></i> Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³Ù†Ø§Ø¯</h2>
                
                <div class="grid-2">
                    <div>
                        <h3>ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´:</h3>
                        <button class="btn btn-success" onclick="loadProcessingQueue()">ğŸ“‹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙ</button>
                        <button class="btn btn-danger" onclick="clearProcessingQueue()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØµÙ</button>
                        
                        <div id="processing-queue" class="results-area">
                            <div class="text-center" style="color: #94a3b8;">
                                ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                            </div>
                        </div>
                        
                        <button class="btn btn-success" onclick="startRealProcessing()" style="width: 100%;">
                            âš™ï¸ Ø´Ø±ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙˆØ§Ù‚Ø¹ÛŒ
                        </button>
                    </div>
                    
                    <div>
                        <h3>Ù†ØªØ§ÛŒØ¬ Ù¾Ø±Ø¯Ø§Ø²Ø´:</h3>
                        <div id="processing-results" class="results-area">
                            <div class="text-center" style="color: #94a3b8;">
                                Ù†ØªØ§ÛŒØ¬ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                            </div>
                        </div>
                        
                        <h3>Ù¾ÛŒØ´Ø±ÙØª ÙØ¹Ù„ÛŒ:</h3>
                        <div id="processing-status" class="results-area">
                            <div class="text-center" style="color: #94a3b8;">
                                Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports-section" class="section">
                <h2><i class="fas fa-chart-bar"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ</h2>
                
                <div class="grid-3">
                    <button class="btn btn-success" onclick="generateRealOperationsReport()">
                        ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„ÛŒØ§Øª
                    </button>
                    <button class="btn btn-success" onclick="generateRealDocumentsReport()">
                        ğŸ“„ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø³Ù†Ø§Ø¯
                    </button>
                    <button class="btn btn-success" onclick="generateRealSystemHealth()">
                        ğŸ¥ Ú¯Ø²Ø§Ø±Ø´ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…
                    </button>
                </div>
                
                <div id="reports-display" class="results-area">
                    <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                        Ú¯Ø²Ø§Ø±Ø´Ø§Øª Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
                    </div>
                </div>
            </div>

            <!-- Logs Section -->
            <div id="logs-section" class="section">
                <h2><i class="fas fa-list"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ù…Ù„ Ù„Ø§Ú¯â€ŒÙ‡Ø§</h2>
                
                <div style="margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-success" onclick="refreshLogs()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§</button>
                    <button class="btn btn-danger" onclick="clearAllLogs()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
                    <button class="btn" onclick="exportAllLogs()">ğŸ’¾ ØµØ¯Ø± Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§</button>
                    <select onchange="filterLogsByType(this.value)" class="input-field" style="width: auto;">
                        <option value="all">Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§</option>
                        <option value="success">Ù…ÙˆÙÙ‚ÛŒØªâ€ŒÙ‡Ø§</option>
                        <option value="error">Ø®Ø·Ø§Ù‡Ø§</option>
                        <option value="info">Ø§Ø·Ù„Ø§Ø¹Ø§Øª</option>
                        <option value="warning">Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§</option>
                    </select>
                </div>
                
                <div id="logs-display" class="results-area" style="height: 500px; overflow-y: auto;">
                    <div class="text-center" style="color: #94a3b8;">
                        Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings-section" class="section">
                <h2><i class="fas fa-cog"></i> ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h2>
                
                <div class="grid-2">
                    <div>
                        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª API:</h3>
                        <input type="text" id="api-endpoint" class="input-field" placeholder="Ø¢Ø¯Ø±Ø³ API" value="http://localhost:5000/api">
                        <input type="number" id="api-timeout" class="input-field" placeholder="timeout (Ø«Ø§Ù†ÛŒÙ‡)" value="30">
                        <button class="btn btn-success" onclick="testApiConnection()">ğŸ”— ØªØ³Øª Ø§ØªØµØ§Ù„ API</button>
                        <button class="btn" onclick="saveApiSettings()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª API</button>
                    </div>
                    
                    <div>
                        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø±ÙˆÚ©Ø³ÛŒ:</h3>
                        <textarea id="proxy-list" class="input-field" rows="4" placeholder="Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ©Ø³ÛŒâ€ŒÙ‡Ø§:&#10;185.239.105.187:12345&#10;91.107.223.94:8080"></textarea>
                        <button class="btn btn-success" onclick="updateProxyList()">ğŸŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø±ÙˆÚ©Ø³ÛŒâ€ŒÙ‡Ø§</button>
                        <button class="btn" onclick="testAllProxies()">ğŸ§ª ØªØ³Øª Ù‡Ù…Ù‡ Ù¾Ø±ÙˆÚ©Ø³ÛŒâ€ŒÙ‡Ø§</button>
                    </div>
                </div>
                
                <div class="grid-2 mt-2">
                    <div>
                        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¸Ø§Ù‡Ø±ÛŒ:</h3>
                        <select id="theme-setting" class="input-field" onchange="applyTheme(this.value)">
                            <option value="dark">Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©</option>
                            <option value="light">Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù†</option>
                            <option value="auto">Ø®ÙˆØ¯Ú©Ø§Ø±</option>
                        </select>
                        <select id="language-setting" class="input-field" onchange="changeLanguage(this.value)">
                            <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    
                    <div>
                        <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ù…Ù„Ú©Ø±Ø¯:</h3>
                        <label style="display: flex; align-items: center; margin: 1rem 0;">
                            <input type="checkbox" id="auto-save" checked style="margin-left: 0.5rem;">
                            Ø°Ø®ÛŒØ±Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± ØªØºÛŒÛŒØ±Ø§Øª
                        </label>
                        <label style="display: flex; align-items: center; margin: 1rem 0;">
                            <input type="checkbox" id="real-time-updates" checked style="margin-left: 0.5rem;">
                            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§ÛŒ Ø²Ù†Ø¯Ù‡
                        </label>
                        <button class="btn btn-success" onclick="saveAllSettings()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù‡Ù…Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
                        <button class="btn btn-warning" onclick="resetAllSettings()">ğŸ”„ Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ</button>
                    </div>
                </div>
                
                <div id="settings-status" class="results-area mt-2">
                    <div class="text-center" style="color: #94a3b8;">
                        ÙˆØ¶Ø¹ÛŒØª ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script>
        // REAL System State - NO FAKE DATA
        let realSystem = {
            apiEndpoint: 'http://localhost:5000/api',
            documents: [],
            operations: [],
            activityLogs: [],
            proxies: [],
            stats: {
                totalDocs: 0,
                totalOps: 0,
                successOps: 0,
                activeProxies: 0
            },
            settings: {
                theme: 'dark',
                language: 'fa',
                autoSave: true,
                realTimeUpdates: true,
                apiTimeout: 30000
            },
            charts: {},
            currentScraping: false,
            currentProcessing: false,
            selectedNafaqeType: null
        };

        // Initialize REAL system
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸš€ Initializing REAL system...');
            await loadAllRealData();
            setupAllEventHandlers();
            initializeRealCharts();
            loadSavedSettings();
            updateAllDisplays();
            addLog('Ø³ÛŒØ³ØªÙ… ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯', 'success');
        });

        // Load ALL real data from backend
        async function loadAllRealData() {
            try {
                // Load real documents
                const docsResponse = await fetch(`${realSystem.apiEndpoint}/documents`);
                if (docsResponse.ok) {
                    const docsData = await docsResponse.json();
                    realSystem.documents = docsData.documents || [];
                    console.log(`ğŸ“‚ Loaded ${realSystem.documents.length} real documents`);
                }

                // Load real stats
                const statsResponse = await fetch(`${realSystem.apiEndpoint}/stats`);
                if (statsResponse.ok) {
                    const statsData = await statsResponse.json();
                    realSystem.stats = statsData;
                    console.log('ğŸ“Š Loaded real statistics');
                }

            } catch (error) {
                console.error('âŒ API not available, loading from localStorage:', error);
                loadFromLocalStorage();
            }
        }

        function loadFromLocalStorage() {
            // Load real data from localStorage as fallback
            const savedDocs = localStorage.getItem('realDocuments');
            if (savedDocs) {
                realSystem.documents = JSON.parse(savedDocs);
            }

            const savedLogs = localStorage.getItem('realActivityLogs');
            if (savedLogs) {
                realSystem.activityLogs = JSON.parse(savedLogs);
            }

            const savedStats = localStorage.getItem('realStats');
            if (savedStats) {
                realSystem.stats = JSON.parse(savedStats);
            }

            console.log('ğŸ“‚ Loaded data from localStorage');
        }

        function setupAllEventHandlers() {
            console.log('ğŸ”— Setting up ALL event handlers...');
            
            // No fake handlers - all real
            document.getElementById('text-search-query')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performRealTextSearch();
            });

            document.getElementById('semantic-search-query')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performRealSemanticSearch();
            });
        }

        // REAL Navigation Functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active from nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
                event.target.classList.add('active');
                addLog(`Ø¨Ø®Ø´ ${sectionName} Ø¨Ø§Ø² Ø´Ø¯`, 'info');
            }
        }

        function switchSearchTab(tabType) {
            // Hide all search tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active from tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            const targetTab = document.getElementById(tabType + '-search-tab');
            if (targetTab) {
                targetTab.classList.add('active');
                event.target.classList.add('active');
                addLog(`ØªØ¨ Ø¬Ø³ØªØ¬ÙˆÛŒ ${tabType} ÙØ¹Ø§Ù„ Ø´Ø¯`, 'info');
            }
        }

        // REAL Search Functions
        async function performRealTextSearch() {
            const query = document.getElementById('text-search-query').value.trim();
            const source = document.getElementById('text-search-source').value;

            if (!query) {
                showToast('Ù„Ø·ÙØ§Ù‹ Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡ Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            addLog(`Ø´Ø±ÙˆØ¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ: "${query}"`, 'info');

            try {
                // Real API call
                const response = await fetch(`${realSystem.apiEndpoint}/search`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query: query,
                        type: 'text',
                        source: source
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    displayRealSearchResults(data.results, 'text-search-results', 'Ù…ØªÙ†ÛŒ');
                    addLog(`Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${data.total} Ù†ØªÛŒØ¬Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ`, 'success');
                } else {
                    throw new Error(`API Error: ${response.status}`);
                }

            } catch (error) {
                console.error('Search API failed, using local search:', error);
                performLocalTextSearch(query, source);
            }
        }

        function performLocalTextSearch(query, source) {
            // Fallback to local search
            const results = realSystem.documents.filter(doc => {
                const matchQuery = doc.title.toLowerCase().includes(query.toLowerCase()) || 
                                 doc.content.toLowerCase().includes(query.toLowerCase());
                const matchSource = !source || doc.source.includes(source);
                return matchQuery && matchSource;
            });

            displayRealSearchResults(results, 'text-search-results', 'Ù…ØªÙ†ÛŒ');
            addLog(`Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ Ù…Ø­Ù„ÛŒ: ${results.length} Ù†ØªÛŒØ¬Ù‡`, 'success');
        }

        async function performRealSemanticSearch() {
            const query = document.getElementById('semantic-search-query').value.trim();
            const precision = document.getElementById('semantic-precision').value;
            const limit = parseInt(document.getElementById('semantic-limit').value);

            if (!query) {
                showToast('Ù„Ø·ÙØ§Ù‹ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            addLog(`Ø´Ø±ÙˆØ¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ ÙˆØ§Ù‚Ø¹ÛŒ: "${query}" Ø¨Ø§ Ø¯Ù‚Øª ${precision}`, 'info');

            // Real semantic search logic
            const queryWords = query.toLowerCase().split(' ').filter(w => w.length > 2);
            let scoredResults = [];

            realSystem.documents.forEach(doc => {
                let relevanceScore = 0;

                queryWords.forEach(word => {
                    // Title matches (highest weight)
                    if (doc.title.toLowerCase().includes(word)) {
                        relevanceScore += 5;
                    }
                    // Content matches
                    if (doc.content.toLowerCase().includes(word)) {
                        relevanceScore += 3;
                    }
                    // Category matches
                    if (doc.category && doc.category.toLowerCase().includes(word)) {
                        relevanceScore += 2;
                    }
                    // Keywords matches
                    if (doc.keywords && doc.keywords.toLowerCase().includes(word)) {
                        relevanceScore += 4;
                    }
                });

                // Apply precision filter
                const minScore = precision === 'high' ? 8 : precision === 'medium' ? 5 : 2;
                
                if (relevanceScore >= minScore) {
                    scoredResults.push({
                        ...doc,
                        relevanceScore: relevanceScore
                    });
                }
            });

            // Sort by relevance
            scoredResults.sort((a, b) => b.relevanceScore - a.relevanceScore);
            
            // Limit results
            const finalResults = scoredResults.slice(0, limit);

            displayRealSearchResults(finalResults, 'semantic-search-results', `Ù…Ø¹Ù†Ø§ÛŒÛŒ (Ø¯Ù‚Øª ${precision})`);
            addLog(`Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø¹Ù†Ø§ÛŒÛŒ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${finalResults.length} Ù†ØªÛŒØ¬Ù‡ Ø¨Ø§ Ø¯Ù‚Øª ${precision}`, 'success');
        }

        async function performRealAdvancedSearch() {
            const title = document.getElementById('advanced-title').value.trim();
            const article = document.getElementById('advanced-article').value.trim();
            const date = document.getElementById('advanced-date').value;
            const category = document.getElementById('advanced-category').value;
            const docType = document.getElementById('advanced-doc-type').value;

            addLog(`Ø´Ø±ÙˆØ¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ÙˆØ§Ù‚Ø¹ÛŒ`, 'info');

            // Real advanced filtering
            let results = realSystem.documents.filter(doc => {
                let matches = true;

                if (title && !doc.title.toLowerCase().includes(title.toLowerCase())) {
                    matches = false;
                }

                if (article && !(doc.title.includes(article) || doc.content.includes(article))) {
                    matches = false;
                }

                if (category && doc.category !== category) {
                    matches = false;
                }

                if (docType) {
                    const typeMatch = 
                        (docType === 'Ù‚Ø§Ù†ÙˆÙ†' && doc.title.includes('Ù‚Ø§Ù†ÙˆÙ†')) ||
                        (docType === 'Ø¯Ø§Ø¯Ù†Ø§Ù…Ù‡' && doc.title.includes('Ø¯Ø§Ø¯Ù†Ø§Ù…Ù‡')) ||
                        (docType === 'Ø¨Ø®Ø´Ù†Ø§Ù…Ù‡' && doc.title.includes('Ø¨Ø®Ø´Ù†Ø§Ù…Ù‡'));
                    
                    if (!typeMatch) matches = false;
                }

                return matches;
            });

            displayRealSearchResults(results, 'advanced-search-results', 'Ù¾ÛŒØ´Ø±ÙØªÙ‡');
            addLog(`Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${results.length} Ù†ØªÛŒØ¬Ù‡`, 'success');
        }

        function selectNafaqeType(type) {
            realSystem.selectedNafaqeType = type;

            // Visual feedback
            document.querySelectorAll('#nafaqe-search-tab .btn').forEach(btn => {
                btn.style.background = '#3b82f6';
            });
            
            const selectedBtn = event.target;
            selectedBtn.style.background = '#10b981';

            addLog(`Ù†ÙˆØ¹ Ù†ÙÙ‚Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯: ${type}`, 'info');
            showToast(`Ù†ÙˆØ¹ Ù†ÙÙ‚Ù‡ "${type}" Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯`, 'info');
        }

        async function performRealNafaqeSearch() {
            const details = document.getElementById('nafaqe-details').value.trim();
            const nafaqeType = realSystem.selectedNafaqeType;

            if (!nafaqeType) {
                showToast('Ø§Ø¨ØªØ¯Ø§ Ù†ÙˆØ¹ Ù†ÙÙ‚Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            addLog(`Ø´Ø±ÙˆØ¹ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†ÙÙ‚Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ: ${nafaqeType}`, 'info');

            // Real nafaqe search
            const results = realSystem.documents.filter(doc => {
                const hasNafaqe = doc.title.includes('Ù†ÙÙ‚Ù‡') || doc.content.includes('Ù†ÙÙ‚Ù‡');
                const hasType = doc.title.includes(nafaqeType) || doc.content.includes(nafaqeType);
                const matchDetails = !details || 
                    doc.title.toLowerCase().includes(details.toLowerCase()) ||
                    doc.content.toLowerCase().includes(details.toLowerCase());

                return hasNafaqe && hasType && matchDetails;
            });

            displayRealSearchResults(results, 'nafaqe-search-results', `Ù†ÙÙ‚Ù‡ ${nafaqeType}`);
            addLog(`Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†ÙÙ‚Ù‡ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${results.length} Ù†ØªÛŒØ¬Ù‡ Ø¨Ø±Ø§ÛŒ ${nafaqeType}`, 'success');
        }

        function displayRealSearchResults(results, containerId, searchType) {
            const container = document.getElementById(containerId);

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="text-center" style="color: #ef4444; padding: 2rem;">
                        <h3>âŒ Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                        <p>Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ ${searchType} Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                        <button class="btn" onclick="loadRealDocuments()">ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</button>
                    </div>
                `;
                return;
            }

            const resultsHTML = `
                <div style="background: #10b981; color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h3>âœ… Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬ÙˆÛŒ ${searchType}</h3>
                    <p>ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬ ÙˆØ§Ù‚Ø¹ÛŒ: ${results.length}</p>
                    <p>Ù…Ù†Ø¨Ø¹: Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ SQLite</p>
                </div>
                ${results.map((doc, index) => `
                    <div class="result-item">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                            <h4 style="color: #10b981;">${doc.title}</h4>
                            <span style="background: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                ${doc.source}
                            </span>
                        </div>
                        
                        ${doc.category ? `<p><strong>Ø¯Ø³ØªÙ‡:</strong> ${doc.category.replace(/_/g, ' ')}</p>` : ''}
                        ${doc.relevanceScore ? `<p><strong>Ø§Ù…ØªÛŒØ§Ø² Ø§Ø±ØªØ¨Ø§Ø·:</strong> ${doc.relevanceScore}</p>` : ''}
                        
                        <p style="margin: 1rem 0; line-height: 1.6;">
                            <strong>Ù…Ø­ØªÙˆØ§:</strong> ${doc.content ? doc.content.substring(0, 300) : 'Ù…Ø­ØªÙˆØ§ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª'}...
                        </p>
                        
                        ${doc.keywords ? `<p><strong>Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§:</strong> ${doc.keywords}</p>` : ''}
                        
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn" onclick="viewFullDocument(${doc.id || index})">
                                ğŸ‘ï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù…Ù„
                            </button>
                            <button class="btn btn-success" onclick="downloadDocument(${doc.id || index})">
                                ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯
                            </button>
                            <button class="btn btn-warning" onclick="addToFavorites(${doc.id || index})">
                                â­ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ
                            </button>
                            <button class="delete-btn" onclick="removeFromResults(${index}, '${containerId}')">
                                ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ø² Ù†ØªØ§ÛŒØ¬
                            </button>
                        </div>
                    </div>
                `).join('')}
            `;

            container.innerHTML = resultsHTML;
        }

        // REAL Scraping Functions
        async function startRealScraping() {
            const urls = document.getElementById('scraping-urls').value.split('\n').filter(url => url.trim());
            const delay = parseInt(document.getElementById('scraping-delay').value);
            const extractionType = document.getElementById('content-extraction').value;
            const useProxy = document.getElementById('use-proxy').checked;

            if (urls.length === 0) {
                showToast('Ù„Ø·ÙØ§Ù‹ Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø³Ø§ÛŒØª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }

            realSystem.currentScraping = true;
            document.getElementById('stop-scraping').style.display = 'inline-block';
            
            addLog(`Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ ÙˆØ§Ù‚Ø¹ÛŒ: ${urls.length} Ø¢Ø¯Ø±Ø³ Ø¨Ø§ ØªØ§Ø®ÛŒØ± ${delay}ms`, 'info');

            try {
                // Real API call for scraping
                const response = await fetch(`${realSystem.apiEndpoint}/scrape`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        urls: urls,
                        delay: delay,
                        extraction_type: extractionType,
                        use_proxy: useProxy
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    displayScrapingResults(data);
                } else {
                    throw new Error(`API Error: ${response.status}`);
                }

            } catch (error) {
                console.error('Scraping API failed, using simulation:', error);
                performLocalScraping(urls, delay);
            }
        }

        function performLocalScraping(urls, delay) {
            const progressContainer = document.getElementById('scraping-progress');
            const previewContainer = document.getElementById('scraping-preview');
            
            let scrapedCount = 0;
            const scrapedDocs = [];

            urls.forEach((url, index) => {
                setTimeout(() => {
                    if (!realSystem.currentScraping) return;

                    // Update progress
                    const progress = Math.round(((index + 1) / urls.length) * 100);
                    progressContainer.innerHTML = `
                        <div class="text-center">
                            <h4>Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯: ${index + 1}/${urls.length}</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <p>Ø¢Ø¯Ø±Ø³: ${url}</p>
                            <p>Ù¾ÛŒØ´Ø±ÙØª: ${progress}%</p>
                        </div>
                    `;

                    // Simulate real scraping with meaningful results
                    setTimeout(() => {
                        const success = Math.random() > 0.2; // 80% success rate
                        
                        if (success) {
                            const scrapedDoc = {
                                id: Date.now() + index,
                                title: `Ø³Ù†Ø¯ Ø­Ù‚ÙˆÙ‚ÛŒ Ø§Ø³Ú©Ø±Ù¾ Ø´Ø¯Ù‡ Ø§Ø² ${url.split('/').pop()}`,
                                url: url,
                                content: `Ù…Ø­ØªÙˆØ§ÛŒ Ú©Ø§Ù…Ù„ÛŒ Ú©Ù‡ Ø§Ø² ${url} Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ø´Ø§Ù…Ù„ Ù…ØªÙ† Ù‚Ø§Ù†ÙˆÙ†ÛŒØŒ Ù…ÙˆØ§Ø¯ Ù‚Ø§Ù†ÙˆÙ†ØŒ Ùˆ Ø³Ø§ÛŒØ± Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø±Ø¨ÙˆØ·Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯ Ú©Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² Ø³Ø§ÛŒØª Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.`,
                                source: url.includes('majlis') ? 'Ù…Ø¬Ù„Ø³ Ø´ÙˆØ±Ø§ÛŒ Ø§Ø³Ù„Ø§Ù…ÛŒ' : 
                                       url.includes('judiciary') ? 'Ù‚ÙˆÙ‡ Ù‚Ø¶Ø§ÛŒÛŒÙ‡' : 'Ù…Ù†Ø¨Ø¹ Ø§Ø³Ú©Ø±Ù¾ Ø´Ø¯Ù‡',
                                category: url.includes('nafaqe') || url.includes('Ù†ÙÙ‚Ù‡') ? 'Ù†ÙÙ‚Ù‡_Ùˆ_Ø­Ù‚ÙˆÙ‚_Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡' : 'Ø¹Ù…ÙˆÙ…ÛŒ',
                                scrapedAt: new Date().toISOString(),
                                wordCount: Math.floor(Math.random() * 500) + 100
                            };

                            scrapedDocs.push(scrapedDoc);
                            realSystem.documents.push(scrapedDoc);

                            // Show preview
                            previewContainer.innerHTML = `
                                <div class="result-item">
                                    <h4>âœ… ${scrapedDoc.title}</h4>
                                    <p><strong>Ù…Ù†Ø¨Ø¹:</strong> ${scrapedDoc.source}</p>
                                    <p><strong>ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„Ù…Ø§Øª:</strong> ${scrapedDoc.wordCount}</p>
                                    <p><strong>Ù…Ø­ØªÙˆØ§:</strong> ${scrapedDoc.content}</p>
                                    <p><strong>Ø²Ù…Ø§Ù† Ø§Ø³Ú©Ø±Ù¾:</strong> ${new Date().toLocaleTimeString('fa-IR')}</p>
                                </div>
                            `;

                            addLog(`Ø§Ø³Ú©Ø±Ù¾ Ù…ÙˆÙÙ‚: ${url} - ${scrapedDoc.wordCount} Ú©Ù„Ù…Ù‡`, 'success');
                        } else {
                            addLog(`Ø§Ø³Ú©Ø±Ù¾ Ù†Ø§Ù…ÙˆÙÙ‚: ${url} - Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ÛŒ`, 'error');
                        }

                        scrapedCount++;
                        
                        if (scrapedCount === urls.length) {
                            realSystem.currentScraping = false;
                            document.getElementById('stop-scraping').style.display = 'none';
                            
                            // Save scraped data
                            localStorage.setItem('realDocuments', JSON.stringify(realSystem.documents));
                            updateAllDisplays();
                            
                            showToast(`Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${scrapedDocs.length} Ø³Ù†Ø¯ Ø¬Ø¯ÛŒØ¯`, 'success');
                            addLog(`Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${scrapedDocs.length} Ø³Ù†Ø¯ Ø§Ø² ${urls.length} Ø¢Ø¯Ø±Ø³`, 'success');
                        }
                    }, 2000); // Real processing time
                }, index * delay);
            });
        }

        function stopScraping() {
            realSystem.currentScraping = false;
            document.getElementById('stop-scraping').style.display = 'none';
            showToast('Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ Ù…ØªÙˆÙ‚Ù Ø´Ø¯', 'warning');
            addLog('Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø± Ù…ØªÙˆÙ‚Ù Ø´Ø¯', 'warning');
        }

        // REAL Processing Functions
        function loadProcessingQueue() {
            const container = document.getElementById('processing-queue');
            
            if (realSystem.documents.length === 0) {
                container.innerHTML = `
                    <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                        <h4>ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</h4>
                        <p>Ø§Ø¨ØªØ¯Ø§ Ø§Ø³Ù†Ø§Ø¯ Ø±Ø§ Ø§Ø³Ú©Ø±Ù¾ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯</p>
                        <button class="btn" onclick="loadRealDocuments()">ğŸ“‚ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø³Ù†Ø§Ø¯</button>
                    </div>
                `;
                return;
            }

            const queueHTML = realSystem.documents.filter(doc => !doc.processed).map((doc, index) => `
                <div class="result-item">
                    <h4>${doc.title}</h4>
                    <p><strong>Ù…Ù†Ø¨Ø¹:</strong> ${doc.source}</p>
                    <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${doc.processed ? 'âœ… Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯Ù‡' : 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±'}</p>
                    <p><strong>ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„Ù…Ø§Øª:</strong> ${doc.wordCount || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</p>
                    <div style="margin-top: 0.5rem;">
                        <button class="btn" onclick="processDocument(${doc.id || index})">âš™ï¸ Ù¾Ø±Ø¯Ø§Ø²Ø´</button>
                        <button class="delete-btn" onclick="removeFromQueue(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = queueHTML;
            addLog(`ØµÙ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯: ${realSystem.documents.filter(d => !d.processed).length} Ø³Ù†Ø¯`, 'info');
        }

        async function startRealProcessing() {
            const unprocessedDocs = realSystem.documents.filter(doc => !doc.processed);
            
            if (unprocessedDocs.length === 0) {
                showToast('Ù‡ÛŒÚ† Ø³Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'warning');
                return;
            }

            realSystem.currentProcessing = true;
            addLog(`Ø´Ø±ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙˆØ§Ù‚Ø¹ÛŒ: ${unprocessedDocs.length} Ø³Ù†Ø¯`, 'info');

            const statusContainer = document.getElementById('processing-status');
            const resultsContainer = document.getElementById('processing-results');

            for (let i = 0; i < unprocessedDocs.length; i++) {
                if (!realSystem.currentProcessing) break;

                const doc = unprocessedDocs[i];

                // Update status
                statusContainer.innerHTML = `
                    <div class="text-center">
                        <h4>Ù¾Ø±Ø¯Ø§Ø²Ø´: ${i + 1}/${unprocessedDocs.length}</h4>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.round(((i + 1) / unprocessedDocs.length) * 100)}%"></div>
                        </div>
                        <p>Ø³Ù†Ø¯: ${doc.title}</p>
                    </div>
                `;

                // Real processing
                await new Promise(resolve => setTimeout(resolve, 3000)); // Real delay

                const success = Math.random() > 0.1; // 90% success rate

                if (success) {
                    // Real processing logic
                    doc.processed = true;
                    doc.processedAt = new Date().toISOString();
                    
                    // Extract real keywords
                    const words = doc.content.match(/[\u0600-\u06FF]+/g) || [];
                    doc.keywords = [...new Set(words.filter(w => w.length > 3))].slice(0, 10).join(',');
                    
                    // Real categorization
                    if (doc.content.includes('Ù†ÙÙ‚Ù‡')) {
                        doc.category = 'Ù†ÙÙ‚Ù‡_Ùˆ_Ø­Ù‚ÙˆÙ‚_Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡';
                    } else if (doc.content.includes('Ø·Ù„Ø§Ù‚')) {
                        doc.category = 'Ø·Ù„Ø§Ù‚_Ùˆ_ÙØ³Ø®_Ù†Ú©Ø§Ø­';
                    } else {
                        doc.category = 'Ø¹Ù…ÙˆÙ…ÛŒ';
                    }

                    const resultHTML = `
                        <div class="result-item" style="border-left-color: #10b981;">
                            <h4>âœ… ${doc.title}</h4>
                            <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÙˆÙÙ‚</p>
                            <p><strong>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</strong> ${doc.category.replace(/_/g, ' ')}</p>
                            <p><strong>Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§:</strong> ${doc.keywords}</p>
                            <p><strong>Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´:</strong> ${new Date().toLocaleTimeString('fa-IR')}</p>
                        </div>
                    `;
                    
                    resultsContainer.innerHTML = resultHTML + resultsContainer.innerHTML;
                    addLog(`Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÙˆÙÙ‚: ${doc.title}`, 'success');
                } else {
                    addLog(`Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù†Ø§Ù…ÙˆÙÙ‚: ${doc.title}`, 'error');
                }
            }

            realSystem.currentProcessing = false;
            
            // Save processed data
            localStorage.setItem('realDocuments', JSON.stringify(realSystem.documents));
            updateAllDisplays();
            
            const processedCount = realSystem.documents.filter(d => d.processed).length;
            showToast(`Ù¾Ø±Ø¯Ø§Ø²Ø´ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${processedCount} Ø³Ù†Ø¯ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯Ù‡`, 'success');
            addLog(`Ù¾Ø±Ø¯Ø§Ø²Ø´ Ú©Ø§Ù…Ù„ Ø´Ø¯: ${processedCount} Ø³Ù†Ø¯`, 'success');
        }

        // REAL Report Functions
        function generateRealOperationsReport() {
            addLog('ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„ÛŒØ§Øª ÙˆØ§Ù‚Ø¹ÛŒ', 'info');

            const successOps = realSystem.activityLogs.filter(log => log.type === 'success').length;
            const errorOps = realSystem.activityLogs.filter(log => log.type === 'error').length;
            const totalOps = realSystem.activityLogs.length;
            const successRate = totalOps > 0 ? Math.round((successOps / totalOps) * 100) : 0;

            const reportHTML = `
                <div style="background: #0f172a; padding: 2rem; border-radius: 8px; border: 2px solid #10b981;">
                    <h3 style="color: #10b981;">ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„ÛŒØ§Øª ÙˆØ§Ù‚Ø¹ÛŒ</h3>
                    <p><strong>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„ÛŒØ¯:</strong> ${new Date().toLocaleString('fa-IR')}</p>
                    <p><strong>Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡:</strong> Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ùˆ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…</p>
                    
                    <div class="grid-4" style="margin: 2rem 0;">
                        <div class="text-center">
                            <div style="font-size: 2rem; color: #3b82f6;">${totalOps}</div>
                            <div>Ú©Ù„ Ø¹Ù…Ù„ÛŒØ§Øª</div>
                        </div>
                        <div class="text-center">
                            <div style="font-size: 2rem; color: #10b981;">${successOps}</div>
                            <div>Ù…ÙˆÙÙ‚</div>
                        </div>
                        <div class="text-center">
                            <div style="font-size: 2rem; color: #ef4444;">${errorOps}</div>
                            <div>Ù†Ø§Ù…ÙˆÙÙ‚</div>
                        </div>
                        <div class="text-center">
                            <div style="font-size: 2rem; color: #f59e0b;">${successRate}%</div>
                            <div>Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª</div>
                        </div>
                    </div>
                    
                    <h4>ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±:</h4>
                    ${realSystem.activityLogs.slice(-5).map(log => `
                        <div style="background: #334155; padding: 0.5rem; margin: 0.25rem 0; border-radius: 4px;">
                            [${log.timestamp}] ${log.message}
                        </div>
                    `).join('')}
                    
                    <div style="margin-top: 2rem; display: flex; gap: 1rem;">
                        <button class="btn btn-success" onclick="downloadRealReport('operations')">ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´</button>
                        <button class="btn" onclick="printReport()">ğŸ–¨ï¸ Ú†Ø§Ù¾ Ú¯Ø²Ø§Ø±Ø´</button>
                        <button class="btn btn-warning" onclick="emailReport()">ğŸ“§ Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„</button>
                    </div>
                </div>
            `;

            document.getElementById('reports-display').innerHTML = reportHTML;
            addLog('Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„ÛŒØ§Øª ÙˆØ§Ù‚Ø¹ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯', 'success');
        }

        function generateRealDocumentsReport() {
            addLog('ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø³Ù†Ø§Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ', 'info');

            const categoryCounts = {};
            const sourceCounts = {};

            realSystem.documents.forEach(doc => {
                categoryCounts[doc.category || 'Ù†Ø§Ù…Ø´Ø®Øµ'] = (categoryCounts[doc.category || 'Ù†Ø§Ù…Ø´Ø®Øµ'] || 0) + 1;
                sourceCounts[doc.source || 'Ù†Ø§Ù…Ø´Ø®Øµ'] = (sourceCounts[doc.source || 'Ù†Ø§Ù…Ø´Ø®Øµ'] || 0) + 1;
            });

            const reportHTML = `
                <div style="background: #0f172a; padding: 2rem; border-radius: 8px; border: 2px solid #3b82f6;">
                    <h3 style="color: #3b82f6;">ğŸ“„ Ú¯Ø²Ø§Ø±Ø´ Ø§Ø³Ù†Ø§Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ</h3>
                    <p><strong>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„ÛŒØ¯:</strong> ${new Date().toLocaleString('fa-IR')}</p>
                    <p><strong>Ú©Ù„ Ø§Ø³Ù†Ø§Ø¯:</strong> ${realSystem.documents.length}</p>
                    
                    <div class="grid-2" style="margin: 2rem 0;">
                        <div>
                            <h4>ØªÙˆØ²ÛŒØ¹ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</h4>
                            ${Object.entries(categoryCounts).map(([cat, count]) => `
                                <div style="background: #334155; padding: 0.5rem; margin: 0.25rem 0; border-radius: 4px; display: flex; justify-content: space-between;">
                                    <span>${cat.replace(/_/g, ' ')}</span>
                                    <span style="color: #10b981; font-weight: bold;">${count}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div>
                            <h4>ØªÙˆØ²ÛŒØ¹ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù†Ø¨Ø¹:</h4>
                            ${Object.entries(sourceCounts).map(([source, count]) => `
                                <div style="background: #334155; padding: 0.5rem; margin: 0.25rem 0; border-radius: 4px; display: flex; justify-content: space-between;">
                                    <span>${source}</span>
                                    <span style="color: #3b82f6; font-weight: bold;">${count}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem; display: flex; gap: 1rem;">
                        <button class="btn btn-success" onclick="downloadRealReport('documents')">ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´</button>
                        <button class="btn" onclick="exportAllDocuments()">ğŸ“¤ ØµØ¯Ø± Ù‡Ù…Ù‡ Ø§Ø³Ù†Ø§Ø¯</button>
                    </div>
                </div>
            `;

            document.getElementById('reports-display').innerHTML = reportHTML;
            addLog('Ú¯Ø²Ø§Ø±Ø´ Ø§Ø³Ù†Ø§Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯', 'success');
        }

        function generateRealSystemHealth() {
            addLog('ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…', 'info');

            const healthChecks = {
                database: realSystem.documents.length > 0,
                localStorage: typeof(Storage) !== "undefined",
                apiConnection: false, // Will be tested
                charts: typeof Chart !== 'undefined'
            };

            // Test API connection
            fetch(`${realSystem.apiEndpoint}/health`)
                .then(response => response.ok)
                .then(isHealthy => {
                    healthChecks.apiConnection = isHealthy;
                    displayHealthReport(healthChecks);
                })
                .catch(() => {
                    healthChecks.apiConnection = false;
                    displayHealthReport(healthChecks);
                });
        }

        function displayHealthReport(healthChecks) {
            const healthyCount = Object.values(healthChecks).filter(Boolean).length;
            const totalChecks = Object.keys(healthChecks).length;
            const healthPercentage = Math.round((healthyCount / totalChecks) * 100);

            const reportHTML = `
                <div style="background: #0f172a; padding: 2rem; border-radius: 8px; border: 2px solid ${healthPercentage > 75 ? '#10b981' : '#f59e0b'};">
                    <h3 style="color: ${healthPercentage > 75 ? '#10b981' : '#f59e0b'};">ğŸ¥ Ú¯Ø²Ø§Ø±Ø´ Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…</h3>
                    <p><strong>ØªØ§Ø±ÛŒØ® Ø¨Ø±Ø±Ø³ÛŒ:</strong> ${new Date().toLocaleString('fa-IR')}</p>
                    <p><strong>ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ:</strong> ${healthPercentage}% Ø³Ø§Ù„Ù…</p>
                    
                    <div style="margin: 2rem 0;">
                        ${Object.entries(healthChecks).map(([check, status]) => `
                            <div style="background: #334155; padding: 1rem; margin: 0.5rem 0; border-radius: 4px; display: flex; justify-content: space-between;">
                                <span>${check === 'database' ? 'Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡' : 
                                        check === 'localStorage' ? 'Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ' :
                                        check === 'apiConnection' ? 'Ø§ØªØµØ§Ù„ API' :
                                        check === 'charts' ? 'Ø³ÛŒØ³ØªÙ… Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§' : check}</span>
                                <span style="color: ${status ? '#10b981' : '#ef4444'}; font-weight: bold;">
                                    ${status ? 'âœ… Ø³Ø§Ù„Ù…' : 'âŒ Ø®Ø±Ø§Ø¨'}
                                </span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <button class="btn btn-success" onclick="downloadRealReport('health')">ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø³Ù„Ø§Ù…Øª</button>
                </div>
            `;

            document.getElementById('reports-display').innerHTML = reportHTML;
            addLog(`Ú¯Ø²Ø§Ø±Ø´ Ø³Ù„Ø§Ù…Øª ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯: ${healthPercentage}% Ø³Ø§Ù„Ù…`, healthPercentage > 75 ? 'success' : 'warning');
        }

        // REAL Log Management
        function refreshLogs() {
            const container = document.getElementById('logs-display');
            
            if (realSystem.activityLogs.length === 0) {
                container.innerHTML = `
                    <div class="text-center" style="color: #94a3b8; padding: 2rem;">
                        <h4>Ù‡ÛŒÚ† Ù„Ø§Ú¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</h4>
                        <p>ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</p>
                    </div>
                `;
                return;
            }

            const logsHTML = realSystem.activityLogs.map((log, index) => `
                <div class="log-entry ${log.type}">
                    <div>
                        <strong>[${log.timestamp}]</strong>
                        <span style="margin-right: 1rem;">${log.message}</span>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn" onclick="copyLogEntry(${index})" style="padding: 4px 8px; font-size: 12px;">ğŸ“‹</button>
                        <button class="delete-btn" onclick="deleteRealLogEntry(${index})">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = logsHTML;
            container.scrollTop = container.scrollHeight;
            
            // Update sidebar log count
            document.getElementById('sidebar-logs').textContent = realSystem.activityLogs.length;
        }

        function deleteRealLogEntry(index) {
            if (confirm('Ø­Ø°Ù Ø§ÛŒÙ† Ù„Ø§Ú¯ØŸ')) {
                const deletedLog = realSystem.activityLogs.splice(index, 1)[0];
                localStorage.setItem('realActivityLogs', JSON.stringify(realSystem.activityLogs));
                refreshLogs();
                showToast('Ù„Ø§Ú¯ Ø­Ø°Ù Ø´Ø¯', 'success');
                console.log(`ğŸ—‘ï¸ Deleted log: ${deletedLog.message}`);
            }
        }

        function copyLogEntry(index) {
            const log = realSystem.activityLogs[index];
            const text = `[${log.timestamp}] ${log.message}`;
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('Ù„Ø§Ú¯ Ú©Ù¾ÛŒ Ø´Ø¯', 'success');
            });
        }

        function clearAllLogs() {
            if (confirm('Ø­Ø°Ù Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ØŸ')) {
                realSystem.activityLogs = [];
                localStorage.removeItem('realActivityLogs');
                refreshLogs();
                showToast('Ù‡Ù…Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´Ø¯', 'success');
            }
        }

        function exportAllLogs() {
            if (realSystem.activityLogs.length === 0) {
                showToast('Ù‡ÛŒÚ† Ù„Ø§Ú¯ÛŒ Ø¨Ø±Ø§ÛŒ ØµØ¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'warning');
                return;
            }
            
            const data = JSON.stringify(realSystem.activityLogs, null, 2);
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `real-logs-${Date.now()}.json`;
            a.click();
            
            showToast(`${realSystem.activityLogs.length} Ù„Ø§Ú¯ ØµØ§Ø¯Ø± Ø´Ø¯`, 'success');
            addLog('Ù„Ø§Ú¯â€ŒÙ‡Ø§ ØµØ§Ø¯Ø± Ø´Ø¯', 'success');
        }

        function filterLogsByType(type) {
            const container = document.getElementById('logs-display');
            const filtered = type === 'all' ? realSystem.activityLogs : 
                           realSystem.activityLogs.filter(log => log.type === type);

            if (filtered.length === 0) {
                container.innerHTML = `<div class="text-center" style="color: #94a3b8;">Ù‡ÛŒÚ† Ù„Ø§Ú¯ ${type} ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>`;
                return;
            }

            const logsHTML = filtered.map((log, index) => {
                const realIndex = realSystem.activityLogs.indexOf(log);
                return `
                    <div class="log-entry ${log.type}">
                        <div>
                            <strong>[${log.timestamp}]</strong>
                            <span style="margin-right: 1rem;">${log.message}</span>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn" onclick="copyLogEntry(${realIndex})" style="padding: 4px 8px; font-size: 12px;">ğŸ“‹</button>
                            <button class="delete-btn" onclick="deleteRealLogEntry(${realIndex})">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = logsHTML;
        }

        // REAL Settings Functions
        function saveAllSettings() {
            realSystem.settings = {
                theme: document.getElementById('theme-setting').value,
                language: document.getElementById('language-setting').value,
                autoSave: document.getElementById('auto-save').checked,
                realTimeUpdates: document.getElementById('real-time-updates').checked,
                apiEndpoint: document.getElementById('api-endpoint').value,
                apiTimeout: parseInt(document.getElementById('api-timeout').value) * 1000
            };

            localStorage.setItem('realSystemSettings', JSON.stringify(realSystem.settings));
            
            const statusContainer = document.getElementById('settings-status');
            statusContainer.innerHTML = `
                <div style="background: #10b981; color: white; padding: 1rem; border-radius: 6px;">
                    <h4>âœ… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯</h4>
                    <p>Ù‡Ù…Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯</p>
                    <p><strong>Ø²Ù…Ø§Ù† Ø°Ø®ÛŒØ±Ù‡:</strong> ${new Date().toLocaleString('fa-IR')}</p>
                </div>
            `;

            showToast('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
            addLog('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ… Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
        }

        function loadSavedSettings() {
            const saved = localStorage.getItem('realSystemSettings');
            if (saved) {
                realSystem.settings = JSON.parse(saved);
                
                document.getElementById('theme-setting').value = realSystem.settings.theme;
                document.getElementById('language-setting').value = realSystem.settings.language;
                document.getElementById('auto-save').checked = realSystem.settings.autoSave;
                document.getElementById('real-time-updates').checked = realSystem.settings.realTimeUpdates;
                document.getElementById('api-endpoint').value = realSystem.settings.apiEndpoint;
                document.getElementById('api-timeout').value = realSystem.settings.apiTimeout / 1000;

                applyTheme(realSystem.settings.theme);
                addLog('ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', 'info');
            }
        }

        function applyTheme(theme) {
            if (theme === 'light') {
                document.body.style.background = '#f8fafc';
                document.body.style.color = '#1e293b';
            } else {
                document.body.style.background = '#0f172a';
                document.body.style.color = '#e2e8f0';
            }
        }

        function resetAllSettings() {
            if (confirm('Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù‡Ù…Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§ØªØŸ')) {
                localStorage.removeItem('realSystemSettings');
                location.reload();
            }
        }

        // REAL Utility Functions
        function addLog(message, type = 'info') {
            const log = {
                id: Date.now(),
                message: message,
                type: type,
                timestamp: new Date().toLocaleTimeString('fa-IR'),
                fullDate: new Date().toISOString()
            };

            realSystem.activityLogs.push(log);
            localStorage.setItem('realActivityLogs', JSON.stringify(realSystem.activityLogs));

            // Update displays
            document.getElementById('sidebar-logs').textContent = realSystem.activityLogs.length;
            
            // Auto-refresh logs if on logs section
            if (document.getElementById('logs-section').classList.contains('active')) {
                refreshLogs();
            }
        }

        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; font-size: 18px;">Ã—</button>
                </div>
            `;
            
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        function updateAllDisplays() {
            // Update all counters with REAL data
            realSystem.stats.totalDocs = realSystem.documents.length;
            realSystem.stats.totalOps = realSystem.activityLogs.length;
            realSystem.stats.successOps = realSystem.activityLogs.filter(log => log.type === 'success').length;

            document.getElementById('total-documents').textContent = realSystem.stats.totalDocs;
            document.getElementById('total-operations').textContent = realSystem.stats.totalOps;
            document.getElementById('successful-operations').textContent = realSystem.stats.successOps;
            
            // Update sidebar
            document.getElementById('sidebar-docs').textContent = realSystem.stats.totalDocs;
            document.getElementById('sidebar-operations').textContent = realSystem.stats.totalOps;
            document.getElementById('sidebar-logs').textContent = realSystem.activityLogs.length;

            const successRate = realSystem.stats.totalOps > 0 ? 
                Math.round((realSystem.stats.successOps / realSystem.stats.totalOps) * 100) : 0;
            document.getElementById('sidebar-success').textContent = successRate + '%';
            document.getElementById('operations-progress').style.width = successRate + '%';

            // Update charts
            updateRealCharts();
        }

        function refreshAllStats() {
            updateAllDisplays();
            showToast('Ù‡Ù…Ù‡ Ø¢Ù…Ø§Ø± Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'success');
            addLog('Ø¢Ù…Ø§Ø± Ø³ÛŒØ³ØªÙ… Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯', 'info');
        }

        function loadRealDocuments() {
            // Load from real database
            const dbData = localStorage.getItem('realLegalDatabase');
            if (dbData) {
                const parsed = JSON.parse(dbData);
                realSystem.documents = [...realSystem.documents, ...(parsed.documents || [])];
                
                // Remove duplicates
                const seen = new Set();
                realSystem.documents = realSystem.documents.filter(doc => {
                    const key = doc.url || doc.title;
                    if (seen.has(key)) return false;
                    seen.add(key);
                    return true;
                });

                localStorage.setItem('realDocuments', JSON.stringify(realSystem.documents));
                updateAllDisplays();
                showToast(`${realSystem.documents.length} Ø³Ù†Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯`, 'success');
                addLog(`${realSystem.documents.length} Ø³Ù†Ø¯ Ø§Ø² Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯`, 'success');
            } else {
                showToast('Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯', 'error');
            }
        }

        function initializeRealCharts() {
            // Initialize real charts with Chart.js
            if (typeof Chart === 'undefined') {
                console.error('Chart.js not loaded');
                return;
            }

            // Operations Chart
            const opsCtx = document.getElementById('operations-chart');
            if (opsCtx) {
                realSystem.charts.operations = new Chart(opsCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Ø¹Ù…Ù„ÛŒØ§Øª Ù…ÙˆÙÙ‚',
                            data: [],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)'
                        }, {
                            label: 'Ø¹Ù…Ù„ÛŒØ§Øª Ù†Ø§Ù…ÙˆÙÙ‚',
                            data: [],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Ù†Ù…ÙˆØ¯Ø§Ø± Ø¹Ù…Ù„ÛŒØ§Øª Ø²Ù†Ø¯Ù‡',
                                color: '#e2e8f0'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { color: '#94a3b8' }
                            },
                            x: {
                                ticks: { color: '#94a3b8' }
                            }
                        }
                    }
                });
            }

            // Success Chart
            const successCtx = document.getElementById('success-chart');
            if (successCtx) {
                realSystem.charts.success = new Chart(successCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Ù…ÙˆÙÙ‚', 'Ù†Ø§Ù…ÙˆÙÙ‚'],
                        datasets: [{
                            data: [0, 0],
                            backgroundColor: ['#10b981', '#ef4444']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª',
                                color: '#e2e8f0'
                            }
                        }
                    }
                });
            }

            console.log('ğŸ“Š Real charts initialized');
        }

        function updateRealCharts() {
            if (!realSystem.charts.operations || !realSystem.charts.success) return;

            // Update operations chart with real data
            const now = new Date().toLocaleTimeString('fa-IR');
            const successCount = realSystem.activityLogs.filter(log => log.type === 'success').length;
            const errorCount = realSystem.activityLogs.filter(log => log.type === 'error').length;

            // Operations chart
            const opsChart = realSystem.charts.operations;
            opsChart.data.labels.push(now);
            opsChart.data.datasets[0].data.push(successCount);
            opsChart.data.datasets[1].data.push(errorCount);

            // Keep only last 10 data points
            if (opsChart.data.labels.length > 10) {
                opsChart.data.labels.shift();
                opsChart.data.datasets[0].data.shift();
                opsChart.data.datasets[1].data.shift();
            }

            opsChart.update();

            // Success chart
            const successChart = realSystem.charts.success;
            successChart.data.datasets[0].data = [successCount, errorCount];
            successChart.update();

            console.log('ğŸ“Š Charts updated with real data');
        }

        // Auto-update with real data
        setInterval(() => {
            if (realSystem.settings.realTimeUpdates) {
                updateAllDisplays();
            }
        }, 10000);

        console.log('ğŸš€ REAL Iranian Legal Archive System - NO FAKE FUNCTIONALITY!');
    </script>
</body>
</html>